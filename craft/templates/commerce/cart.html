{% extends '_layouts/_layout.html' %}

{% block content %}

  {% include 'partials/flashes.html' %}

  <div class="row">
    <div class="twelve columns">

      {% if cart.lineItems|length %}
      <table class="u-full-width">
        <thead>
          <tr>
            <th>Product</th>
            <th>Qty</th>
            <th class="text-right">Price</th>
          </tr>
        </thead>
        <tbody>
          {% for item in cart.lineItems %}
            {% include "commerce/_includes/cart_item" %}
          {% endfor %}

          {% for adjustment in cart.adjustments %}
          <tr>
            <td>{{ adjustment.type }}
            </td>
            <td><strong>{{ adjustment.name }}</strong><br>({{ adjustment.description }})</td>
            <td class="text-right">{{ adjustment.amount|currency(cart.currency) }}</td>
          </tr>
          {% endfor %}

          <tr>
            <td>
              {# Remove all line items to empty the cart: #}
              <form method="POST">
                <input type="hidden" name="action" value="commerce/cart/removeAllLineItems"/>
                <input type="hidden" name="redirect" value="commerce/cart"/>
                {{ getCsrfInput() }}
                <input class="button link" type="submit" value="Empty the Cart"/>
              </form>

            </td>
            <td>
            </td>
            <td class="text-right">
              {% if cart.totalDiscount != '0' %}
                Total Discount: {{ cart.totalDiscount|currency(cart.currency) }}<br>
              {% endif %}
              Total Shipping: {{ cart.totalShippingCost|currency(cart.currency) }}<br>
              Total Tax: {{ cart.totalTax|currency(cart.currency) }}<br>
              <h4>Total Price: {{ cart.totalPrice|currency(cart.currency) }}</h4>
            </td>
          </tr>

        </tbody>
      </table>

      <a class="button button-primary" href="{{ url('commerce/checkout') }}">Checkout</a>
      {% endif %}

      {% if not cart.lineItems|length %}
        <p class="no-items">{{ 'No Items' | t }} <a href="/products">{{ 'Products page' | t }}</a>.</p>
      {% endif %}

    </div>
  </div>
{% endblock %}
